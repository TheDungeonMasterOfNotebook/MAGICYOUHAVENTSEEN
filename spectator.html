<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Notes</title>
<style>
body { font-family:-apple-system; background:#fff8dc; margin:0; }
header { padding:14px; background:#f6e6b4; text-align:center; font-weight:600; }
.note-area { margin:20px; background:#fffdf3; border-radius:10px; padding:15px; min-height:200px; }

/* iOS-style notification */
#notif {
  position:fixed;
  top:-100px;
  left:50%;
  transform:translateX(-50%);
  background:#fff;
  border-radius:14px;
  padding:14px 20px;
  width:250px;
  text-align:center;
  box-shadow:0 5px 15px rgba(0,0,0,0.25);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  font-size:16px;
  font-weight:500;
  transition: top 0.5s ease-out, opacity 0.5s ease-out;
  opacity:0;
}
#notif.show { top:50px; opacity:1; }
#notif img { width:100px; margin-top:8px; border-radius:8px; }
#notif div { margin-top:6px; font-weight:600; }
</style>
</head>
<body>

<header>Notes</header>
<div class="note-area">- Waiting for updates...</div>

<div id="notif">
  ðŸ”” New Card!
  <img id="cardImg" src="placeholder_card.png">
  <div id="cardName">Card Name</div>
</div>

<script>
const notif = document.getElementById('notif');
const cardImg = document.getElementById('cardImg');
const cardName = document.getElementById('cardName');

async function pollPrediction(){
  const res = await fetch("/.netlify/functions/sendPrediction");
  const data = await res.json();
  if(data.card){
    cardImg.src = "placeholder_card.png"; // always use placeholder
    cardName.textContent = data.card.replace(/_/g, ' ');
    notif.classList.add('show');
    setTimeout(()=> notif.classList.remove('show'), 3000);
  }
}

setInterval(pollPrediction, 1000); // poll every second
</script>

</body>
</html>
